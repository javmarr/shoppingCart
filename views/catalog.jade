extends layout
// Page Content
block content
  div.container
    div.row
      div.col-lg-12.text-center
        h1=title

    if (success)
      p(style="color: green")=success
              
    a(href="/addItem" class="btn btn-success btn-sm") Add Item
    
    table(class="table table-striped table-hover")
      tr
        th 
        th isbn
        th name
        th author
        th genre
        th price
        th library
      each item in items
        tr
          td
            button(class="btn btn-primary removeButton" id="#{item.id}") delete
          td(class="showDetails" id="#{item.id}") #{item.isbn}
          td(class="showDetails" id="#{item.id}") #{item.name}
          td(class="showDetails" id="#{item.id}") #{item.author}
          td(class="showDetails" id="#{item.id}") #{item.genre}
          td(class="showDetails" id="#{item.id}") #{item.price}
          td(class="showDetails" id="#{item.id}") #{item.library}
          
            //- input(type="text" name="qtyText" value="#{item.id}")
          //- td
          //-   a(href="product/#{item.id}" class="btn btn-default dealButton") go
    br
    a(href="/" class="btn btn-default btn-block") Back
    
    script.
      $(document).ready( function () {
        $(".showDetails").click(function (e) {
          console.log("showing details for: " + e.target.id);
          window.document.location = "item/"+e.target.id;          
        });
        
        //- $(".removeButton").click(function (e) {
        $(".removeButton").click(function (e) {
           console.log("removing: " + e.target.id);
          $.get( "removeItem/"+e.target.id, function( data ) {
            console.log("received: " + data);
            location.reload();
          });
        });
        
      });
